이 프로젝트는 Linux KVM API를 사용하여 제작된 최소한의 교육용 x86 하이퍼바이저(VMM)입니다. 주로 C로 작성되었으며, 일부 게스트 코드는 x86 어셈블리로 작성되었습니다.

### 프로젝트 개요

`mini-kvm` 하이퍼바이저는 여러 vCPU를 동시에 실행할 수 있으며, 간단한 16비트 리얼 모드 게스트와 '1K OS'라는 더 복잡한 32비트 보호 모드 게스트 OS를 모두 지원합니다. 이 프로젝트는 메모리 관리, vCPU 생성, UART 직렬 포트를 통한 I/O 에뮬레이션, 하이퍼콜을 통한 게스트-호스트 통신 등 핵심적인 가상화 개념을 보여줍니다.

프로젝트는 세 가지 주요 부분으로 구성됩니다:

1.  **`hypervisor`**: Rust 기반 하이퍼바이저.
2.  **`kvm-vmm-x86`**: C 기반 VMM으로, `README.md`의 주요 초점입니다.
3.  **`HLeOs`**: Rust로 작성된 소규모 OS.

이 문서는 프로젝트에서 가장 완성도가 높고 문서화가 잘 된 부분으로 보이는 `kvm-vmm-x86`의 C 기반 VMM에 중점을 둡니다.

### 빌드 및 실행

이 프로젝트는 `make`를 사용하여 VMM과 게스트 운영 체제를 빌드합니다.

**사전 요구사항:**

*   GCC, Make, Binutils
*   QEMU/KVM
*   Rust (Rust 기반 구성 요소의 경우)

**빌드 명령어:**

*   **VMM 빌드 (C 버전):**
    ```bash
    cd kvm-vmm-x86
    make vmm
    ```

*   **리얼 모드 게스트 빌드:**
    ```bash
    cd kvm-vmm-x86/guest
    ./build.sh
    ```

*   **1K OS 빌드 (보호 모드 게스트):**
    ```bash
    cd kvm-vmm-x86/os-1k
    make
    ```

*   **Rust 기반 하이퍼바이저 빌드:**
    ```bash
    cd hypervisor
    cargo build
    ```

*   **HLeOs 빌드:**
    ```bash
    cd HLeOs/HLeOs
    make
    ```

**VMM 실행:**

C 기반 VMM은 게스트 바이너리를 인수로 사용하여 명령줄에서 실행됩니다.

*   **리얼 모드 게스트 실행:**
    ```bash
    ./kvm-vmm-x86/kvm-vmm ./kvm-vmm-x86/guest/hello.bin
    ```

*   **여러 vCPU에서 여러 리얼 모드 게스트 실행:**
    ```bash
    ./kvm-vmm-x86/kvm-vmm ./kvm-vmm-x86/guest/multiplication.bin ./kvm-vmm-x86/guest/counter.bin
    ```

*   **1K OS 실행 (보호 모드):**
    ```bash
    printf "1\n0\n" | ./kvm-vmm-x86/kvm-vmm --paging ./kvm-vmm-x86/os-1k/kernel.bin
    ```

### 개발 규칙

*   **코드 스타일:** C 코드는 4칸 들여쓰기를 사용하는 K&R 스타일을 따릅니다. 함수 이름은 `snake_case`를 사용하고 매크로는 `UPPER_CASE`를 사용합니다. 어셈블리 코드는 Intel 구문을 사용하고 소문자 니모닉을 사용합니다.
*   **주석:** 주석은 코드가 '무엇'을 하는지보다 '왜' 그렇게 하는지를 설명하는 데 사용됩니다.
*   **테스트:** 이 프로젝트에는 `make` 대상(예: `make test`, `make test-hello`)을 통해 실행할 수 있는 여러 테스트 케이스가 포함되어 있습니다.

### 주요 파일

*   `kvm-vmm-x86/src/main.c`: C 기반 VMM의 핵심입니다. VM 및 vCPU 생성, 메모리 관리, 기본 VM exit 루프를 처리합니다.
*   `kvm-vmm-x86/Makefile`: C 기반 VMM의 기본 `Makefile`입니다.
*   `kvm-vmm-x86/guest/`: 간단한 리얼 모드 게스트의 소스 코드를 포함합니다.
*   `kvm-vmm-x86/os-1k/`: 보호 모드 게스트인 1K OS의 소스 코드를 포함합니다.
*   `hypervisor/src/main.rs`: Rust 기반 하이퍼바이저의 진입점입니다.
*   `HLeOs/HLeOs/src/main.rs`: HLeOs 운영 체제의 기본 소스 파일입니다.
*   `README.md`: 프로젝트의 주요 문서입니다.